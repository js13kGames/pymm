<html>
<head>
<script>
$W=window
for(n in $W){$W[n.substr(0,3)]=$W[n]}
$D=doc
$PYMM=()=>{
$S=String
P$='prototype'
$S[P$].$r=$S[P$].replaceAll
F$='function'
$L=(a)=>a.length
$E=eval
R='return'
C='continue'
$MMD=""
$oid=0
$S[P$].pymm=function(){
var $=this.split('\n'), __=[],q=0,_,t,ms={}
for(var _i=0;_i<$L($);_i++){
_=$[_i];T=_.trim().split(' ');t=T[0];
eval($MMD)
if(t.endsWith('='))_='var '+_
if(t=='#'){
if($L(_)==1)ms={}
else { for(j=0;j<$L(T[1]);j++)ms[T[1][j]]=T[2+j];}
if(q)__.push('}')
else __.push('')
q=0
continue
}
for(var n in ms)_=_.$r(n,ms[n])
js=_.$r('~',C)
__.push(js)
}
return __.join('\n')
}
$MMD=`# ABE if(t==' '){_=_.$r(' else
A'&&q){_+='}';q--}
AifBif ', 'if (') +'){';q++}
AelifBelif ', '}E if (') +'){';}
if(_.trim()=='E'&&q){_='}E{'}
A@'){
q++
k='@ '
I='i'
if($L(T)>2){I=T[1];k+=I}
_=_.$r(k,"for(var "+I+"=0;"+I+"<$L(")+");"+I+"++){"
}
if(_[0]=='B\u0001',F$+' ')+'{';q++;$oid=0}
A<<B<<',R)}
`.pymm()

$m=(a,b)=>$E(("# "+a+'\n'+b+'\n#').pymm())

$m("QFR $S[P$]. "+F$+ " ){"+R,
`Qsw=F(a){
a= a.split(' ')
r= 0
@ a
if this.sth(a[i])
r++


<< r
}
Qcount=F(a='\t'R $L(this.sit(a))-1}
Qlines=F(a,bR this.sit('\\n')}
Qwords=F(R this.replace(/([a-z])([A-Z])/g, '$1 $2').$r('-', ' ').split(' ')}
`)

$SS=`
b= Object.getOwnPropertyNames(A)
@ b
n= b[i]
l= $L(n)
A[n[0]+n.substr(l-2,l)]=A[n]
A[n.substr(2,5)]=A[n]

`
$m("A $S[P$]",$SS)
$m("A $S",$SS)

chr=(a)=>$S.fde(a)
ord=(a)=>a.charCodeAt(0)

$MMD+= `
if t==':'
ks= T[1]
vs= T.slice(2,$L(T))
if ks.iOf(',')!=-1
if ks.iOf('|')!=-1
[ka,kb]= ks.split('|')
ks=ka.split(',').concat(kb.split(''))
else
ks=ks.split(',')

elif $L(vs)==1
vs=vs[0]

d= '$save(o'+$oid+'={'
$oid++
@ ks
kc= ks[i]
vl= vs[i]
if vl==undefined
if kc.endsWith('s')
vl='[]'
elif kc.iOf('t')!=-1
vl='""'
else
vl='0'


d+=kc+':'+vl+','

_=d.substr(0,$L(d)-1)+'})'

`.pymm()

M=Math
$R=(a=1)=>M.random()*a
$r=(a)=>$R()<a
$MF=(a)=>M.floor(a)



$cs=[]
$EL=Element
$m("ABF a=n.str( if(a==' "+F$,
`
for(n in $D.body.style){
l=$L(n)
A0,3)
Bfon')A4,7)
Bbor')A6,9)
a+=n[l-1]
if(n.iOf('-')!=-1||$cs.indexOf(a)!=-1)~
$cs.push(a)
b='this.style.'+n
$EL[P$]['$'+a]=$E("(F $(s){if(s)"+b+"=s;return "+b+"})")
}
`)

$py=(s)=>s.$r('@','for i in range(len(').$r(_$S_,'def ')

$m('QUXF "rgba("+ this.$bacd("linear-gradient("+ +","+ '+F$,
`
$EL[P$].clr=F(a,d=0,f=1){
if typeof(a)=='string'
this.$bacr(a)
<<

if a[3]<=0.4
this.$filr('blur(5px)')

if(!this._iclr)this._iclr=[a[0],a[1],a[2],a[3]]
p= Qa[0]Xa[1]Xa[2]+","
c= p+a[3]+')'
if f
if(f==2) Ud+"deg,"+p+"0),"+c+")");
else Ud+"deg,"+Q(a[0]/4)X(a[1]/2)X(a[2]/2)Xa[3]+"),"+c+")");
else
this.$bacr(c)

}`)

$t=`$T=function(){
r= []
@ A
r.push($("T",A[i],1))

<< r[0]
}`

f=(t)=>$m('TA '+t+' arguments',$t);
'a hr div code span pre svg'.split(' ').forEach(f)

$DO=Document
}

$art=()=>{
$pl=$sarr("v/-.___.-|()n==-.-----,/__/[dD]`#######-.,,,,,,,.-T@O7---\\7K\\")
$cpal=[[204,11,8,1.0],[255,242,227,1.0],[98,6,4,1.0],[255,25,23,0.7],[20,43,98,1.0],[31,65,151,1.0],[9,18,41,1.0],[2,1,2,0.4],[0,0,0,1.0]];

$pk="<751;&/	;^D?5#	8<	2:'J3&_!&M[VQW0Z$U3KW&B3T";
$cir="|r)S%S)/URQJ PUS)XV]O%+IGhYJ)YnXIG0X$LE/1'!I):5 $?	>1";
$tree={
"2s"/*LEG*/:"&/7%5@%:C0Q8R@R/V	9V	BV	",
"B"/*ARM*/:"5V%",
"0:"/*EYE*/:"=4\\000?5;()>B	C9	",
"0:"/*BLINK*/:";5<7\\0004<"};var $fl=$$($cir,$cpal,null,5);
$fl=$fl.concat($$($pk,$pl));

	$BIRD=$BOT($fl,$tree,$cpal,$pl);
}
$p=`

# M m=m.str(
$dom()
p= [$EL,$DO]
@ p
P= p[i][P$]
a= Object.keys(P).sort().reverse()
@ j a
n= a[j]
L= $L(n)
if(L<3)~
try{var b=P[n]}catch{~}
m= n.Lower()
if m.sw('get set create')
ML-5, L)
else
M0,2)+n[L-1]

P[m]=b



#
_=""
# I .indexOf(i)
for(i=1;i<128;i++){
if([10,11,12,13,34,92]I!=-1)
~
_+=chr(i)
}
$f=(i)=>_I-60
$uf=(i)=>_I
_$S_=_[0]
#

$mem= []
$save(a)
b= {}
for(n in a){b[n]=a[n]}
a._$=b
a.id=$L($mem)
$mem.push(a)
<< a

$reset(a)
for(n in a._$){a[n]=a._$[n]}


$Evt(a,b,c,d)
$W.add(a,b)
$W.add(c,d)

# ABC $f($[i $uf($[i {x:x,y:y,
$$($,$P,al,st=4)
r= []
for(i=0;i<$L($);i+=st){
if $[i]==chr(92)
$P=al
st=4;~

x= A])
y= A+1])
s= B+2])
p= B+3])
if st==5
j= B+4])
o= Cw:s,h:p,c:$P[j]}
else
o= Cs:s,t:$P[p].$r('O',chr(10061))}

r.push(o)
}
<< r

$pv($)
i= 0
<< {x:A]),y:A+1]),T:B+2])}
#
$sarr(a)
<< a.split(_$S_)

$anim=[
[],
$legs=[],
$blks=[],
[],
$arms=[]
]

$(a,o,f)
e= $D.ement(a)
if o
if o.cb
e.onclick=o.cb

if o.x!=undefined
e.$posn('absolute')
e.$left(o.x)
e.$topp(o.y)

e.x=o.x
e.y=o.y
if o.T
$anim[o.T].push(e)

if o.w
e.$widh(o.w)
e.$heit(o.h)
if o.c
e.clr(o.c)
if typeof(o.c)!='string'
e.$Radiuss('50%')
e.$boxw('-10px 20px 15px rgba(0,0,0,0.2)')

e.style.borderStyle='solid'
e.$Widthh(0.5)
else
e.clr([64,64,64,1],0,2)


if o.s
e.$Sizee(o.s)
e.apd(o.t)

if(o.l)e.href='https://'+o.l
if(o.b) e.$filr('blur('+o.b+'px)')
o.$=e

if(f)$D.qur('#CAM').apd(e)
<< e

# AH .apd($code( $div(pi)
$BOT(b,c,cp,sp,x=300,y=300)
: arms,state|xyzXZjr [0,0] "" x y 1
ob= o0
ob.chat=$code(
: xywhsct 50 -80 160 80 16 'white'
)
ob.chat.$boxw('-10px 10px 8px black')
rt= $div(ob)
@ b
rtAb[i]))

for(k in c){
pi= $pv(k)
ps= H
co= H
if pi.T
if pi.T==4
co.$left(-ps.x)
else
co.$left(-ps.x*0.7)

rt.apd(co)

rt.apd(ps)
cs= $$(c[k],cp,sp,5)
@ i cs
psAcs[i]))
coAcs[i]))
if pi.T==4
@ j [1,2,3,4,5]
jj= j+1
g= $code(cs[i])
g.$left(g.x-(j*5))
g.$topp(g.y-5)
g.$tram('rotate('+(jj*10)+'deg)')
ps.apd(g)
g= $code(cs[i])
g.$left(g.x+(j*5))
g.$topp(g.y-5)
g.$tram('rotate('+(-jj*10)+'deg)')
co.apd(g)



}
rt.apd(ob.chat)
<< ob

choice(a)
<< a[$MF($R($L(a)-1))]

$gen1()
$a(
: xystl 820 35 20 "MoonBird_NFT" "opensea.io/Quantumpoetic"
,
: xystl 20 55 30 "py--" "gitlab.com/pythonmm/pymm"
,
: xystl 820 55 20 "JS13KB_2022" "https://js13kgames.com/entries/2022"
)
pre= $pre(
: xyst 132 32 9 'moon'
)
py= $py($p).lines()
y= 10
xx= -150
@ py
y+=10
s= 9
a= py[i]
b= a.split(' ')[0]
o= $hr(
: xyst 150 y+s s a
)
if a.sw('def for if')
s+=10
x= $L(a)*10
o= $div(
: xywh x+xx y 200+xx 128
)
o.$tram('skew(-45deg)')
if x>270
o= $div(
: xywh x-100 y+20 300 128
)
o.$tram('skew(45deg) rotate(180deg)')

xx+=5





$gen2()
$lig=$div(
: xywhcb 400 200 300 300 'white' 60
)
$lig.$mixe('overlay')
$lig.soft=$div(
: xywhcb 500 250 150 150 'white' 40
)
$col=$div(
: xywhc 400 200 100 100 'blue'
)


#
# WHUVXYG .width .height b.x b.y a.x a.y .trect()
overlaps(a,b)
a= aG
b= bG
h= X<U+bW&&X+aW>U
v= Y<V+bH&&Y+aH>V
<< {x:h,y:v,side:b.x-a.x,over:b.y-a.y,h:b.y}
#
$cmd =''
$cmds =[]
$cmdi =0
reset(v)
if v==''
<<

$cmd=v
$cmds=v.split('')
$cmds.reverse()
o= $BIRD
$reset(o)

genground(h)
x= 200
@ [1,2,3,4,5]
b= $('b',{x:x,y:h-30,w:128,h:7,c:'cyan',},1)
x+=132



$minscl=0.1
$maxscl=3
$0=0
$1=0
$loop()
o= $BIRD
e= o.$
hit= overlaps(e,$col)
if hit.x
if hit.over>0
if o.over!=1
o.over=1
o.y=hit.h
o.y-=100
$minscl+=0.3
$maxscl=0.9
genground(hit.h)
<<

elif o.over!=1
o.x-=30
o.x-=o.z*3
o.X=-0.4
o.g=1
if o.z>1
o.x-=100
elif o.z<0.3
o.j+=80



$0+=0.01
$1+=0.1
$lig.$opay($R(0.2)+0.8)
$lig.soft.$opay($R(0.2)+0.5)
LX=400+(Math.sin($1)*200)
LY=250+(Math.cos($1)*200)
$lig.$left(LX)
$lig.soft.$left(LX+100)
$lig.$topp(LY)
$lig.soft.$topp(LY+100)
DX=o.x-LX
DY=o.y-LY
DZ=(1-o.z)*0.25
DZ+=20-((Math.abs(DX)+Math.abs(DY))*0.025)
if DZ<0.5
DZ=0.5

o.chat.$boxw( (DX*0.05)+"px "+(DY*0.1)+"px 20px black" )
v= $D.qur('#P1').value
if v==""
o.chat.hidden=true
else
o.chat.hidden=false
o.chat.innerText=v

$cmdi++
if $cmdi>30
$cmdi=0
if $L($cmds)
go($cmds.pop())
else
reset(v)


bl= $r(0.1)
@ $blks
$blks[i].hidden=!bl

ds= $D.gname('code')
@ ds
if ds[i].$Radiuss()!=""
if($r(0.2)) ds[i].$Radiuss(($R(10)+40)+'%');
ds[i].$boxw( (DX*0.1)+"px "+(DY*0.1)+"px 20px rgba(0,0,0,0.2)" )
c= ds[i]._iclr
ds[i].clr([c[0]*DZ, c[1]*DZ, c[2]*DZ, c[3]])
elif $L(ds[i].innerText)<5
ds[i].$tram('rotate('+$MF($R(10)-5)+'deg)')


@ $legs
r= ($R()-0.5)*(o.X+(o.Z*10))*100
$legs[i].$tram("rotateZ(" +$MF(r) + "deg)")

mv= $R(20)
if !(hit.x&&hit.y)
if o.over!=1
o.x+=o.X*50
o.x-=$R(o.r*0.4)


o.z+=o.Z*0.5
if o.r
o.j += $R(o.r)

if(o.z<$minscl)o.z=$minscl
if(o.z>$maxscl)o.z=$maxscl
M= o.z
tra= 'scaleX('+M+')'
if o.state=='l'
tra='scaleX('+ (-M) +')'
o.x -=mv
if o.x < -20
o.x = -20
o.state ="r"

o.j = mv * 2
elif o.state=='r'
o.x +=mv
o.j =mv * 2

e.$left(o.x)
tra+=' scaleY('+M+')'
if(o.state=="s") e.$topp(o.y-o.j+$R(40));
else e.$topp(o.y - o.j);
tra+=' rotateY('+(o.X*$R(50))+'deg)'
if o.r
tra+=' skew('+(o.r+$R(o.r/2))+'deg)'
elif o.state=='q'
tra+=' skewY(30'+$R()+'deg)'

e.$tram(tra)
$arms[0].$tram('rotate('+( (o.j*0.75)+o.arms[0] )+'deg)')
$arms[1].$tram('rotate('+( (-o.j*0.75)+o.arms[1] )+'deg)')
o.j*=0.7
o.X*=0.8
o.Z*=0.8

# SJAB state=" j= arms[0] arms[1]
$actions={
a:'Sl"\\nX=-1',
w:'J100\\nZ=-0.2',
s:'Ss"\\nX=0\\nZ=0.1\\nJ30',
d:'Sr"\\nX=1',
z:'Z=-0.5',
q:'J100\\nX-=0.5',
e:'J100\\nX+=0.5',
o:'A-=4',
p:'A+=4',
k:'B+=4',
l:'B-=4',
u:'A=0',
i:'B=0',
n:'A=30',
m:'B=-30',
t:'r=0\\nSi"\\nJ60',
f:'r=10',
g:'r=0',
h:'r=-10',
x:'J160',
c:'z=1'
}
#
$down(e)
o= $BIRD
f= $actions[e.key]
if f
a= f.lines()
@ a
eval('o.'+a[i])





$up(evt)
o= $BIRD;
o.state="i"

go(k)
$down({key:k})
setTimeout($up,200)


`

function init() {
	$PYMM()
// serious bug here, setting fontFamily on body ahead of PYMM breaks init
	$D.body.$Familyy("system-ui")
	$D.body.clr('gray')
	$js=$p.pymm()
	$E($js)
	$dom()
	$gen1()
	$art()
	$gen2()
	$Evt('keydown',$down,'keyup',$up)
	setInterval($loop, 33)
}
setTimeout(init, 1000)
</script>
</head>
<body>
<input id="P1"/>
<div id="CAM" style="height:500;position:relative;overflow:hidden;background-color:red"></div>
<h1>raw bytes: 9579</h1><h1>zip kilobytes: 5.4</h1></body></html>