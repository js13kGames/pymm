<html>
<head>
<script>
$W=window
for(n in $W){$W[n.substr(0,3)]=$W[n]}
$D=doc
$PYMM=()=>{
$S=String
P$='prototype'
$S[P$].$r=$S[P$].replaceAll
F$='function'
$L=(a)=>a.length
$E=eval
R='return'
C='continue'
$MMD=""
$S[P$].pymm=function(){
var $=this.split('\n'), __=[],q=0,_,t,ms={}
for(i=0;i<$L($);i++){
_=$[i];T=_.trim().split(' ');t=T[0];
eval($MMD)
if(t.endsWith('='))_='var '+_
if(t=='#'){
if($L(_)==1)ms={}
else { for(j=0;j<$L(T[1]);j++)ms[T[1][j]]=T[2+j];}
if(q)__.push('}')
else __.push('')
q=0
continue
}
for(n in ms)_=_.$r(n,ms[n])
js=_.$r('^',";break} case ").$r('~',C)
__.push(js)
}
return __.join('\n')
}
$MMD=`# ABE if(t==' '){_=_.$r(' else
A'&&q){_+='}';q--}
AifBif ', 'if (') +'){';q++}
AelifBelif ', '}E if (') +'){';}
if(_.trim()=='E'&&q){_='}E{'}
A@'){
q++
k='@ '
I='i'
if($L(T)>2){I=T[1];k+=I}
_=_.$r(k,"for("+I+"=0;"+I+"<$L(")+");"+I+"++){"
}
if(_[0]=='B\u0001',F$+' ')+'{';q++}
A<<B<<',R)}
`.pymm()

$m=(a,b)=>$E(("# "+a+'\n'+b+'\n#').pymm())

$m("A?FR $S[P$]. this.sth( "+F$+ " ){"+R,
`Asw=F(a,b,cR ?a)||?b)||?c)}
Acount=F(a='\t'R $L(this.sit(a))-1}
Alines=F(a,bR this.sit('\\n')}`)

$SS=`
b= Object.getOwnPropertyNames(A)
@ b
n= b[i]
l= $L(n)
A[n[0]+n.substr(l-2,l)]=A[n]
A[n.substr(2,5)]=A[n]

`
$m("A $S[P$]",$SS)
$m("A $S",$SS)

chr=(a)=>$S.fde(a)

M=Math
$R=(a=1)=>M.random()*a
$r=(a)=>$R()<a
$MF=(a)=>M.floor(a)



$css=[]
$EL=Element
$m("ABF a=n.str( if(a==' "+F$,
`
for(n in $D.body.style){
l=$L(n)
A0,3)
Bfon')A4,7)
Bbor')A6,9)
a+=n[l-1]
if(n.iOf('-')!=-1||$css.indexOf(a)!=-1)~
$css.push(a)
b='this.style.'+n
$EL[P$]['$'+a]=$E("(F $(s){if(s)"+b+"=s;return "+b+"})")
}
`)

$py=(s)=>s.$r('@','for i in range(len(').$r(_$S_,'def ')

$m('QUXF "rgba("+ this.$bacd("linear-gradient("+ +","+ '+F$,
`
$EL[P$].clr=F(a,d=0,f=1){
if a[3]<=0.4
this.$filr('blur(5px)')

if(!this._iclr)this._iclr=[a[0],a[1],a[2],a[3]]
p= Qa[0]Xa[1]Xa[2]+","
c= p+a[3]+')'
if f
if(f==2) Ud+"deg,"+p+"0),"+c+")");
else Ud+"deg,"+Q(a[0]/4)X(a[1]/2)X(a[2]/2)Xa[3]+"),"+c+")");
else
this.$bacr(c)

}`)

$DO=Document
}

$art=()=>{
$pl=$sarr("v/-.___.-|()n==-.-----,/__/[dD]`#######-.,,,,,,,.-T@O7---\\7K\\")
$cpal=[[204,11,8,1.0],[255,242,227,1.0],[98,6,4,1.0],[255,25,23,0.7],[20,43,98,1.0],[31,65,151,1.0],[9,18,41,1.0],[2,1,2,0.4],[0,0,0,1.0]];

$pk="<751;&/	;^D?5#	8<	2:'J3&_!&M[VZ$KW&B3U3TW0Q";
$cir="|r)S%/URQJ ][%+IGhYE3IGZ%LE0X$/1'!I):5 $?	>1";
$tree={"2s":"&C7%5@%:C0Q8R@R/V	9V	BV	","0:":"=8\\000?5;()>B	C9	","0:":";8<:\\0004<"};var $fl=$$($cir,$cpal,null,5);
$fl=$fl.concat($$($pk,$pl));

	$BIRD=$BOT($fl,$tree,$cpal,$pl);
}
$blin=[]
$legs=[]
$p=`

# M m=m.str(
$dom()
p= [$EL,$DO]
@ p
P= p[i][P$]
a= Object.keys(P).sort().reverse()
@ j a
n= a[j]
L= $L(n)
if(L<3)~
try{var b=P[n]}catch{~}
m= n.Lower()
if m.sw('get','set','create')
ML-5, L)
else
M0,2)+n[L-1]

P[m]=b



#
_=""
# I .indexOf(i)
for(i=1;i<128;i++){
if([10,11,12,13,34,92]I!=-1)
~
_+=chr(i)
}
$f=(i)=>_I-60
$uf=(i)=>_I
_$S_=_[0]
#

$Evt(a,b,c,d)
$W.add(a,b)
$W.add(c,d)

# ABC $f($[i $uf($[i {x:x,y:y,
$$($,$P,al,st=4)
r= []
for(i=0;i < $L($)-st;i+=st){
if $[i]==chr(92)
$P=al
st=4;~

x= A])
y= A+1])
s= B+2])
p= B+3])
if st==5
j= B+4])
o= Cw:s,h:p,c:$P[j]}
else
o= Cs:s,t:$P[p].$r('O',chr(10061))}

r.push(o)
}
<< r

$pv($)
i= 0
<< {x:A]), y:A+1]), T:B+2])}
#
$sarr(a)
<< a.split(_$S_)

$(a,o,f)
e= $D.ement(a)
e.$posn('absolute')
if o
e.$left(o.x)
e.$topp(o.y)
e.x=o.x
e.y=o.y
if o.T==1
$legs.push(e)
elif o.T==2
$blin.push(e)

if o.w
e.$widh(o.w)
e.$heit(o.h)
if o.c
e.clr(o.c)
e.$Radiuss('50%')
e.style.borderStyle='solid'
e.$Widthh(0.5)
else
e.clr([64,64,64,1],0,2)


if o.s
e.$Sizee(o.s)
e.apd(o.t)

if(o.ref)e.href='https://'+o.ref
o.$=e

if(f)$D.body.apd(e)
<< e

$save(a)
b= {}
for(n in a){b[n]=a[n]}
a._$=b
<< a

$reset(a)
for(n in a._$){a[n]=a._$[n]}

# AH .apd($('code', $('div',pi)
$BOT(b,c,cp,sp,x=300,y=300)
ob= $save({x:x,y:y,state:'I',fx:0,fz:0,jump:0,z:1})
rt= $('div',ob,1)
@ b
rtAb[i]))

for(k in c){
pi= $pv(k)
ps= H
co= H
if pi.T
co.$left(-ps.x*0.7)
rt.apd(co)

rt.apd(ps)
cs= $$(c[k],cp,sp,5)
@ i cs
psAcs[i]))
coAcs[i]))

}
<< ob

choice(a)
<< a[$MF($R($L(a)-1))]

$gen1()
$('a',{x:820,y:35,s:20,t:"MoonBird NFT",ref:"opensea.io/Quantumpoetic"},1)
$('a',{x:20,y:55,s:30,t:"py--",ref:"gitlab.com/pythonmm/pymm"},1)
$('a',{x:820,y:55,s:20,t:"JS13KB 2022",ref:"https://js13kgames.com/entries/2022"},1)
pre= $('pre', {x:132,y:32,s:9,t:'moon'},1)
py= $py($p).lines()
y= 10
xx= -150
@ py
y+=10
s= 9
a= py[i]
b= a.split(' ')[0]
o= $('hr',{x:150,y:y+s,s:s,t:a},1)
if a.sw('def','for','if')
s+=10
x= $L(a)*10
o= $('div', {x:x+xx,y:y,w:200+xx,h:128},1)
o.$tram('skew(-45deg)')
if x>270
o= $('div', {x:x-100,y:y+20,w:300,h:128},1)
o.$tram('skew(45deg) rotate(180deg)')

xx+=5





# WHUVXYG .width .height b.x b.y a.x a.y .tRect()
overlaps(a,b)
a=aG
b=bG
h=X<U+bW&&X+aW>u
v=Y<V+bH&&Y+aH>v
<< h&&v
#
$cmd =''
$cmds =[]
$cmdi =0
reset(v)
$cmd=v
$cmds=v.split('')
$cmds.reverse()
o= $BIRD
$reset(o)


$loop()
v= $D.qur('#P1').value
$cmdi++
if $cmdi>30
$cmdi=0
if $cmds.length
go($cmds.pop())
else
reset(v)


o= $BIRD
e= o.$
bl= $r(0.1)
@ $blin
$blin[i].hidden=!bl

ds= $D.gname('code')
@ ds
if ds[i].$Radiuss()!=""
if($r(0.2)) ds[i].$Radiuss(($R(10)+40)+'%');
elif $L(ds[i].innerText)<5
ds[i].$tram('rotate('+$MF($R(10)-5)+'deg)')


@ $legs
r= ($R()-0.5)*(o.fx+(o.fz*10))*100
$legs[i].$tram("rotateZ(" +$MF(r) + "deg)")

mv= $R(20)
o.x +=o.fx * 50
o.z +=o.fz * 0.5
if(o.z<0.1)o.z=0.1
M= o.z
tra= 'scaleX('+M+')'
if o.state=='L'
tra='scaleX('+ (-M) +')'
o.x -=mv
if o.x < -20
o.x = -20
o.state ="R"

o.jump = mv * 2
elif o.state=='R'
o.x +=mv
o.jump =mv * 2

e.$left(o.x)
tra+=' scaleY('+M+')'
if(o.state=="S") e.$topp(o.y-o.jump+$R(40));
else e.$topp(o.y - o.jump);
tra+=' rotateY('+(o.fx*50*$R())+'deg)'
e.$tram(tra)
o.jump*=0.7
o.fx*=0.8
o.fz*=0.8



$down(e)
o= $BIRD
switch(e.key){
case 'a':{
o.state="L"
o.fx=-1
^'s':{
o.state="S"
o.fx=0
o.fz=0.1
o.jump=30
^'d':{
o.state="R"
o.fx=1
^'w':{
if(o.state=="S") o.jump=200;
else o.jump=100;
o.fz=-0.2
^'z':{o.fz = -0.5
^'q':{o.jump=100;o.fx-=0.5
^'e':{o.jump=100;o.fx+=0.5
^'c':{o.fz = 1;break}
}

$up(evt)
o= $BIRD;
o.state="I"

go(k)
$down({key:k})
setTimeout($up,200)


`
function init() {
	$PYMM()
// serious bug here, setting fontFamily on body ahead of PYMM breaks init
	$D.body.style.fontFamily="system-ui"
	$js=$p.pymm()
	$E($js)
	$dom()
	$gen1()
	$art()
	$Evt('keydown',$down,'keyup',$up)
	setInterval($loop, 33)
}
</script>
</head>
<body onload="init()">
<input id="P1"/>
<i>num bytes: 6637</i></body></html>